<!DOCTYPE html>
<html>

{%include "_header.html"%}
<body>
    <h1>Kaikki urheilusuoritukset</h1>

    <form method="post" action="{{url_for("sort_workouts")}}">
        <label for="workout_level">Lajittele vaativuuden mukaan:</label>
        <select name="workout_level" id="workout_level">
            <option value="all">Kaikki</option>
            <option value="easy">Helppo</option>
            <option value="medium">Keskitaso</option>
            <option value="hard">Vaikea</option>
        </select>
        <label for="workout_type">Lajittele urheilulajin mukaan:</label>
        <select name="workout_type" id="workout_type">
            <option value="all">Kaikki</option>
            <option value="icehockey">Jääkiekko</option>
            <option value="football">Jalkapallo</option>
            <option value="running">Juoksu</option>
            <option value="gym">Kuntosali</option>
            <option value="biking">Pyöräily</option>
            <option value="tennis">Tennis</option>
            <option value="padel">Padel</option>
            <option value="volleyball">Lentopallo</option>
            <option value="combat_sport">Kamppailu</option>
            <option value="other">Muu</option>
        </select>
        <button type="submit"> Lajittele </button>
    </form>
    {% for workout in workouts %}
        <fieldset>
            <legend>{{workout.sport}}</legend>
            <div>
                <h3>{{ workout.title }}, Taso: {{ workout.workout_level }}, Laji {{workout.sport}}</h3>
                <p>{{ workout.content }}</p>
                <small>Lisätty: {{ workout.sent_at }} Käyttäjältä {{ workout.username }}</small>
            {%if session.user_id%}
                <div>
                    <form method="post" action="{{ url_for("comment_post", workout_id=workout.id) }}">
                        <textarea name="comment_content" rows="4" cols="50"></textarea><br>
                        <input type="submit" value="Lähetä kommentti">
                    </form>
                    {%if session.user_id == workout.user_id%}
                    <form method="post" action= "{{url_for("edit_workout", workout_id = workout.id, workout_user_id = workout.user_id   )}}">
                        <button type="submit"> Muokkaa</button>
                    </form>
                    {%endif%}
                </div>    
            {%endif%}
            <div>
                <h4>Kommentit:</h4>
                {% for comment in workout.get_comments() %}
                    <div>
                        <p>{{ comment[0] }}</p>
                        <small>Käyttäjältä: {{ comment[1] }}</small>
                    </div>
                {% endfor %}
            </div>
        </fieldset>
    {% endfor %}

    <p>Kirjaudu tai rekisteröidy kommentoidaksesi suorituksia</p>
    <p><a href="/register">Rekisteröidy</a></p>
    <p><a href="/">Kirjaudu etusivulta </a></p>
</body>
</html>

